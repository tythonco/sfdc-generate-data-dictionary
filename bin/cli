#!/usr/bin/env node
'use strict';

const program = require('commander');
const orchestrator = require('../index.js');
const pjson = require('../package.json');

program
  .description(pjson.description)
  .version(pjson.version)
  .option('-u, --username [username]', 'targetusername')
  .option('-l, --loginUrl [loginUrl]', 'salesforce login URL [https://login.salesforce.com]', 'https://login.salesforce.com')
  .option('-c, --allCustomObjects [allCustomObjects]', 'retrieve all custom objects [true]', true)
  .option('-lc, --lucidchart [lucidchart]', 'generate ERD file for Lucidchart [true]', true)
  .option('-s, --sobjects [sobjects]', 'sObjects to retrieve separated with commas')
  .option('-D, --debug [debug]', 'generate debug log file [false]', false)
  .option('-e, --excludeManagedPackage [excludeManagedPackage]', 'exclude managed packaged [true]', true)
  .option('-d, --deleteFolders [deleteFolders]', 'delete/clean temp folders [true]', true)
  .option('-ht, --hideTechFields [hideTechFields]', 'hide tech fields', false)
  .option('-tp, --techFieldPrefix [techFieldPrefix]', 'Tech field prefix', 'TECH_')
  .option('-o, --output [dir]', 'salesforce data dictionary directory path [.]', '.')
  .action(function(options) {
    orchestrator(options, console.log)
    .catch(function(err){
      throw err;
    });
  })
  .parse(process.argv);
